<div class="container">
    <h1 class="fancy-header">The Fancy Goodiebox</h1>
    <!-- LOGIN -->
    <div *ngIf="!loggedIn" class="login-box">
        <h2>Login</h2>
        <input [(ngModel)]="username" placeholder="Username">
        <input [(ngModel)]="password" type="password" placeholder="Password">
        <button (click)="login()">Login</button>
    </div>

    <!-- CONTENT -->
    <div *ngIf="loggedIn">

        <div class="cart-container">
            <app-cart-preview [username]="currentUser"></app-cart-preview>
            <!-- Checkout-Button -->
            <button class="logout-btn" (click)="logout()">Logout</button>
        </div>

        <!-- neue √úberschrift -->
        <h2 class="headline">
            Hey {{ currentUser }}, schau dir an,
            was du nicht brauchst ‚Äì aber unbedingt willst üòè
        </h2>

        <!-- Kategorien + Preisfilter in EINER ZEILE -->
        <div class="top-filters">

            <div class="categories">
                <button class="category-btn"
                        [class.active]="activeCategory === 'all'"
                        (click)="setCategory('all')">Alle</button>

                <button class="category-btn"
                        [class.active]="activeCategory === 'office'"
                        (click)="setCategory('office')">Office</button>

                <button class="category-btn"
                        [class.active]="activeCategory === 'nerd'"
                        (click)="setCategory('nerd')">Nerd</button>

                <button class="category-btn"
                        [class.active]="activeCategory === 'food'"
                        (click)="setCategory('food')">Food</button>
            </div>

            <form class="price-filter" [formGroup]="priceForm">
                <label>Preis</label>

                <input type="range"
                       formControlName="minPrice"
                       min="0" max="100" step="5"
                       (input)="onPriceChange()">

                <input type="range"
                       formControlName="maxPrice"
                       min="0" max="100" step="5"
                       (input)="onPriceChange()">

                <span>
          {{ priceForm.value.minPrice }}‚Ç¨ ‚Äì {{ priceForm.value.maxPrice }}‚Ç¨
        </span>
            </form>

        </div>

        <!-- CAROUSEL ‚Äì UNVER√ÑNDERT -->
        <div class="carousel-container"
             *ngIf="subscriptions.length > 0; else loadingTemplate">

            <button class="nav-arrow nav-left" (click)="scrollLeft()">‚Üê</button>

            <div class="carousel-track"
                 [style.transform]="'translateX(-' + (currentIndex * 264) + 'px)'">

                <div class="carousel-card"
                     *ngFor="let abo of infiniteCards; trackBy: trackById">

                    <img *ngIf="abo.imageUrl" [src]="abo.imageUrl" [alt]="abo.name">
                    <h4>{{ abo.name }}</h4>
                    <p>{{ abo.description }}</p>

                    <div class="price">{{ abo.price }} ‚Ç¨</div>

                    <div class="buttons-row">
                        <button class="btn-buy" (click)="buy(abo)">Kaufen</button>
                        <button class="btn-discover" (click)="discover(abo)">Neugierig?</button>
                    </div>

                </div>
            </div>

            <button class="nav-arrow nav-right" (click)="scrollRight()">‚Üí</button>
        </div>

        <ng-template #loadingTemplate>
            <div class="loading">Lade Abonnements...</div>
        </ng-template>

    </div>
</div>
